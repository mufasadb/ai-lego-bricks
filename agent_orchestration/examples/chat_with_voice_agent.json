{
  "name": "chat_with_voice_agent",
  "description": "A chat agent that converts its responses to speech using TTS",
  "config": {
    "memory_backend": "auto",
    "default_llm_provider": "gemini",
    "default_model": "gemini-1.5-flash",
    "default_tts_provider": "coqui_xtts"
  },
  "_alternatives": {
    "openai_config": {
      "default_llm_provider": "openai",
      "default_tts_provider": "openai"
    },
    "google_config": {
      "default_llm_provider": "gemini", 
      "default_tts_provider": "google"
    }
  },
  "steps": [
    {
      "id": "get_user_input",
      "type": "input",
      "description": "Get user query",
      "config": {
        "prompt": "What would you like me to tell you?"
      },
      "outputs": ["user_query"]
    },
    {
      "id": "generate_response",
      "type": "llm_chat",
      "description": "Generate AI response",
      "config": {
        "provider": "gemini",
        "model": "gemini-1.5-flash",
        "system_message": "You are a helpful AI assistant. Keep your responses conversational and engaging."
      },
      "inputs": {
        "message": {
          "from_step": "get_user_input",
          "field": "user_query"
        }
      },
      "outputs": ["response"]
    },
    {
      "id": "convert_to_speech",
      "type": "tts",
      "description": "Convert response to speech",
      "config": {
        "provider": "coqui_xtts",
        "voice": "default",
        "output_format": "wav",
        "output_path": "output/response.wav",
        "speed": 1.0
      },
      "_alternatives": {
        "openai_tts": {
          "provider": "openai",
          "voice": "nova",
          "output_format": "mp3",
          "output_path": "output/response.mp3"
        },
        "google_tts": {
          "provider": "google",
          "output_format": "wav",
          "output_path": "output/response.wav",
          "extra_params": {
            "language_code": "en-US",
            "ssml_gender": "NEUTRAL"
          }
        }
      },
      "inputs": {
        "text": {
          "from_step": "generate_response",
          "field": "response"
        }
      },
      "outputs": ["audio_file_path", "success"]
    },
    {
      "id": "output_results",
      "type": "output",
      "description": "Return both text and audio results",
      "config": {
        "format": "json"
      },
      "inputs": {
        "text_response": {
          "from_step": "generate_response",
          "field": "response"
        },
        "audio_file": {
          "from_step": "convert_to_speech",
          "field": "audio_file_path"
        },
        "tts_success": {
          "from_step": "convert_to_speech",
          "field": "success"
        },
        "voice_used": {
          "from_step": "convert_to_speech",
          "field": "voice_used"
        },
        "provider_used": {
          "from_step": "convert_to_speech",
          "field": "provider"
        }
      }
    }
  ]
}