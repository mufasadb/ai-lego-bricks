{
  "name": "streaming_agent",
  "description": "Demonstrates streaming capabilities with real-time response and TTS output",
  "config": {
    "default_llm_provider": "ollama",
    "default_model": "llama2",
    "default_tts_provider": "coqui_xtts"
  },
  "steps": [
    {
      "id": "get_user_input",
      "type": "input",
      "description": "Get user's message",
      "config": {
        "prompt": "What would you like to talk about?"
      },
      "outputs": ["user_message"]
    },
    {
      "id": "stream_response",
      "type": "llm_chat",
      "description": "Generate streaming response",
      "config": {
        "provider": "ollama",
        "model": "llama2",
        "temperature": 0.7,
        "max_tokens": 500,
        "stream": true,
        "use_conversation": false,
        "system_message": "You are a helpful and engaging conversational assistant. Provide thoughtful, well-structured responses."
      },
      "inputs": {
        "message": {
          "from_step": "get_user_input",
          "field": "user_message"
        }
      },
      "outputs": ["response", "streamed", "chunks"]
    },
    {
      "id": "convert_to_speech",
      "type": "tts",
      "description": "Convert response to speech",
      "config": {
        "provider": "coqui_xtts",
        "voice": "default",
        "output_format": "wav",
        "output_path": "output/streaming_response.wav",
        "speed": 1.0
      },
      "inputs": {
        "text": {
          "from_step": "stream_response",
          "field": "response"
        }
      },
      "outputs": ["audio_file_path", "success", "duration_ms"]
    },
    {
      "id": "output_response",
      "type": "output",
      "description": "Output response with streaming and audio info",
      "config": {
        "format": "json"
      },
      "inputs": {
        "text_response": {
          "from_step": "stream_response",
          "field": "response"
        },
        "was_streamed": {
          "from_step": "stream_response",
          "field": "streamed"
        },
        "chunk_count": {
          "from_step": "stream_response",
          "field": "chunks"
        },
        "audio_file": {
          "from_step": "convert_to_speech",
          "field": "audio_file_path"
        },
        "audio_duration_ms": {
          "from_step": "convert_to_speech",
          "field": "duration_ms"
        }
      }
    }
  ]
}